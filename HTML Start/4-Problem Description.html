<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Describe Problem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>::-webkit-scrollbar { display: none;}</style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'Helvetica', 'SF Pro', 'system-ui', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white font-sans">
    
    <div id="app-container" class="min-h-screen flex flex-col">
        
        <header id="header" class="bg-black text-white px-6 pt-8 pb-6">
            <button id="back-btn" class="mb-4 text-white hover:text-gray-300 transition-colors">
                <i class="fa-solid fa-arrow-left text-[20px]"></i>
            </button>
            <h1 class="text-[32px] font-bold leading-tight mb-2">Describe the problem</h1>
            <p class="text-[15px] font-light text-gray-300">Help us understand what's happening with your vehicle.</p>
        </header>

        <div id="progress-bar" class="w-full h-[3px] bg-black">
            <div id="progress-fill" class="h-full bg-white transition-all duration-300" style="width: 66%"></div>
        </div>

        <div id="step-indicator" class="px-6 py-4 bg-black">
            <p class="text-white text-[13px] font-medium tracking-wider">STEP 4 OF 6</p>
        </div>

        <main id="main-content" class="flex-1 px-6 py-8 pb-32">
            
            <section id="vehicle-info-card" class="mb-8 p-5 bg-gray-50 border border-gray-200 rounded-lg">
                <div class="flex items-center justify-between mb-3">
                    <div>
                        <p class="text-[13px] font-medium tracking-[0.08em] uppercase text-gray-600 mb-1">Your Vehicle</p>
                        <p class="text-[17px] font-semibold text-black">Ford Focus (2014)</p>
                    </div>
                    <i class="fa-solid fa-car text-[28px] text-black"></i>
                </div>
                <div class="flex items-center gap-2 text-[15px] text-gray-600">
                    <i class="fa-solid fa-location-dot text-[14px]"></i>
                    <span>Ringwood, Hampshire</span>
                </div>
            </section>

            <section id="problem-input-section" class="mb-8">
                <label class="block text-[13px] font-medium tracking-[0.08em] uppercase text-black mb-3">What's happening?</label>
                <div class="relative">
                    <textarea 
                        id="problem-textarea" 
                        rows="10" 
                        placeholder="Be as detailed as possible. Include:&#10;&#10;• When did it start?&#10;• What sounds, smells, or sensations?&#10;• Any warning lights?&#10;• Does it happen all the time or sometimes?&#10;&#10;Example: 'Started yesterday. Strange grinding noise when I brake, especially at low speeds. No warning lights yet.'"
                        class="w-full px-5 py-5 text-[17px] font-light text-black bg-white border-2 border-black rounded-lg focus:outline-none focus:ring-2 focus:ring-black resize-none leading-relaxed"
                    ></textarea>
                    <div id="char-counter" class="absolute bottom-4 right-5 text-[13px] text-gray-400">
                        <span id="char-count">0</span> characters
                    </div>
                </div>
                <p class="mt-3 text-[13px] font-light text-gray-600 leading-relaxed">The more detail you provide, the better prepared your mechanic will be.</p>
            </section>

            <section id="quick-prompts-section" class="mb-8">
                <p class="text-[13px] font-medium tracking-[0.08em] uppercase text-black mb-4">Need help describing it?</p>
                <div class="space-y-3">
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-volume-high text-[16px] mr-3 text-gray-600"></i>
                        There's an unusual noise
                    </button>
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-triangle-exclamation text-[16px] mr-3 text-gray-600"></i>
                        Warning light is on
                    </button>
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-droplet text-[16px] mr-3 text-gray-600"></i>
                        Leaking fluid
                    </button>
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-gauge-high text-[16px] mr-3 text-gray-600"></i>
                        Performance issue
                    </button>
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-wind text-[16px] mr-3 text-gray-600"></i>
                        Strange smell
                    </button>
                    <button class="prompt-btn w-full px-5 py-4 text-left text-[15px] font-normal text-black bg-white border-2 border-gray-300 rounded-lg hover:border-black hover:bg-gray-50 transition-all">
                        <i class="fa-solid fa-circle-xmark text-[16px] mr-3 text-gray-600"></i>
                        Won't start
                    </button>
                </div>
            </section>

            <section id="tips-section" class="p-5 bg-black text-white rounded-lg">
                <div class="flex items-start gap-4">
                    <i class="fa-solid fa-lightbulb text-[24px] mt-1"></i>
                    <div>
                        <h3 class="text-[17px] font-semibold mb-2">Pro tip</h3>
                        <p class="text-[15px] font-light leading-relaxed">Mechanics find it helpful when you describe exactly when the problem occurs — during startup, while driving, when braking, etc.</p>
                    </div>
                </div>
            </section>

        </main>

        <div id="bottom-action-bar" class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-black px-6 py-4">
            <button id="continue-btn" class="w-full py-5 text-[17px] font-semibold text-white bg-black rounded-xl hover:bg-gray-900 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                Continue
            </button>
            <p id="validation-message" class="mt-3 text-center text-[13px] font-light text-gray-500">Please describe the problem (minimum 20 characters)</p>
        </div>

    </div>

    <script>
        window.addEventListener('load', function() {
            const elements = {
                backBtn: document.getElementById('back-btn'),
                problemTextarea: document.getElementById('problem-textarea'),
                charCount: document.getElementById('char-count'),
                continueBtn: document.getElementById('continue-btn'),
                validationMessage: document.getElementById('validation-message'),
                promptBtns: document.querySelectorAll('.prompt-btn')
            };

            const MIN_CHARS = 20;

            function updateCharCount() {
                const length = elements.problemTextarea.value.length;
                elements.charCount.textContent = length;

                if (length >= MIN_CHARS) {
                    elements.continueBtn.disabled = false;
                    elements.validationMessage.textContent = 'Looking good! Continue when ready.';
                    elements.validationMessage.classList.remove('text-gray-500');
                    elements.validationMessage.classList.add('text-black');
                } else {
                    elements.continueBtn.disabled = true;
                    const remaining = MIN_CHARS - length;
                    elements.validationMessage.textContent = `${remaining} more character${remaining !== 1 ? 's' : ''} needed`;
                    elements.validationMessage.classList.remove('text-black');
                    elements.validationMessage.classList.add('text-gray-500');
                }
            }

            elements.problemTextarea.addEventListener('input', updateCharCount);

            elements.promptBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const currentText = elements.problemTextarea.value.trim();
                    const promptText = this.textContent.trim().replace(/\s+/g, ' ');
                    
                    if (currentText) {
                        elements.problemTextarea.value = currentText + '\n\n' + promptText + ': ';
                    } else {
                        elements.problemTextarea.value = promptText + ': ';
                    }
                    
                    elements.problemTextarea.focus();
                    updateCharCount();
                    
                    this.classList.add('bg-gray-100', 'border-gray-400');
                    setTimeout(() => {
                        this.classList.remove('bg-gray-100', 'border-gray-400');
                    }, 200);
                });
            });

            elements.backBtn.addEventListener('click', function() {
                window.history.back();
            });

            elements.continueBtn.addEventListener('click', function() {
                if (elements.problemTextarea.value.trim().length >= MIN_CHARS) {
                    console.log('Proceeding to AI clarification...');
                }
            });

            elements.problemTextarea.focus();
        });
    </script>

</body>
</html>